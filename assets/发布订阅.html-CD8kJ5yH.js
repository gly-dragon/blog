import{_ as s}from"./plugin-vue_export-helper-DlAUqK2U.js";import{o as n,c as a,a as e}from"./app-CjzCgv4n.js";const t={},i=e(`<h1 id="redis的发布和订阅" tabindex="-1"><a class="header-anchor" href="#redis的发布和订阅"><span>redis的发布和订阅</span></a></h1><h2 id="什么是发布和订阅" tabindex="-1"><a class="header-anchor" href="#什么是发布和订阅"><span>什么是发布和订阅</span></a></h2><p>redis发布订阅（pub/sub）是一种消息通信模式：发布者（pub）发布消息，订阅者（sub）接收消 息。 redis客户端可以订阅任意数量的频道。</p><h2 id="redis的发布和订阅-1" tabindex="-1"><a class="header-anchor" href="#redis的发布和订阅-1"><span>redis的发布和订阅</span></a></h2><p>客户端订阅频道图：</p><img src="https://gly-blog-file.oss-cn-shanghai.aliyuncs.com/img/image-20220429150303972.png" style="zoom:33%;"><p>当给这个频道发布消息后，消息就会发送给订阅的客户端。</p><img src="https://gly-blog-file.oss-cn-shanghai.aliyuncs.com/img/image-20220429150635009.png" style="zoom:33%;"><h2 id="发布和订阅的命令行实现" tabindex="-1"><a class="header-anchor" href="#发布和订阅的命令行实现"><span>发布和订阅的命令行实现</span></a></h2><ol><li><p>打开一个客户端订阅channel1，命令：subscribe 频道1 频道2 ...，可以订阅多个频道</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code>subscribe channel1
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><img src="https://gly-blog-file.oss-cn-shanghai.aliyuncs.com/img/image-20220429151621961.png" alt="image-20220429151621961" loading="lazy"></p></li><li><p>打开另一个客户端，给channel1发布消息，命令：publish channel1 消息，返回值是订阅者数量。</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code>publish channel1 hello
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><img src="https://gly-blog-file.oss-cn-shanghai.aliyuncs.com/img/image-20220429151800046.png" alt="image-20220429151800046" loading="lazy"></p></li><li><p>切换到订阅客户端就可以看到收到的消息。</p><p><img src="https://gly-blog-file.oss-cn-shanghai.aliyuncs.com/img/image-20220429151918567.png" alt="image-20220429151918567" loading="lazy"></p></li></ol><h2 id="发布和订阅常用命令" tabindex="-1"><a class="header-anchor" href="#发布和订阅常用命令"><span>发布和订阅常用命令</span></a></h2><ol><li><p>订阅一个或多个消息频道</p><p>**命令：**subscribe 频道1 频道2...</p><p>**返回值：**接收到的信息，详细信息：</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> subscribe channel1
Reading messages<span class="token punctuation">..</span>. <span class="token punctuation">(</span>press Ctrl-C to quit<span class="token punctuation">)</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;subscribe&quot;</span>			<span class="token comment">#返回值的类型：显示订阅成功</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;channel1&quot;</span>			<span class="token comment">#订阅频道的名字</span>
<span class="token number">3</span><span class="token punctuation">)</span> <span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>			<span class="token comment">#目前已订阅的频道数量</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;message&quot;</span>			<span class="token comment">#返回值的类型：信息</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;channel1&quot;</span>			<span class="token comment">#信息来源（是哪个频道的信息）</span>
<span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">&quot;hello&quot;</span>				<span class="token comment">#信息内容</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>发布消息到指定的频道</p><p>**命令：**publish 频道 信息</p><p>**返回值：**接收到信息的订阅者数量</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token comment">#向channel1频道发送消息hello</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> publish channel1 hello
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>		<span class="token comment">#订阅者数量，表示有1个客户端订阅了该频道消息</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>订阅一个或多个符合给定模式的频道</p><p>**命令：**pusbscribe 表达式</p><p>订阅一个或多个符合表达式的频道，每个模式一<code>*</code>作为匹配符，比如<code>it*</code>匹配所有以<code>it</code>开头的频道（<code>it.new</code>,<code>it.blog</code>等）；</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token comment"># 第 1 - 6 行是执行 psubscribe 之后的反馈信息</span>
<span class="token comment"># 第 7 - 10 才是接收到的第一条信息</span>
<span class="token comment"># 第 11 - 14 是第二条</span>
<span class="token comment"># 以此类推。。。</span>
redis<span class="token operator">&gt;</span> psubscribe news.* tweet.*
Reading messages<span class="token punctuation">..</span>. <span class="token punctuation">(</span>press Ctrl-C to quit<span class="token punctuation">)</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;psubscribe&quot;</span> <span class="token comment"># 返回值的类型：显示订阅成功</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;news.*&quot;</span> <span class="token comment"># 订阅的模式</span>
<span class="token number">3</span><span class="token punctuation">)</span> <span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span> <span class="token comment"># 目前已订阅的模式的数量</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;psubscribe&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;tweet.*&quot;</span>
<span class="token number">3</span><span class="token punctuation">)</span> <span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">2</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;pmessage&quot;</span> <span class="token comment"># 返回值的类型：信息</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;news.*&quot;</span> <span class="token comment"># 信息匹配的模式</span>
<span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">&quot;news.it&quot;</span> <span class="token comment"># 信息本身的目标频道</span>
<span class="token number">4</span><span class="token punctuation">)</span> <span class="token string">&quot;Google buy Motorola&quot;</span> <span class="token comment"># 信息的内容</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol>`,12),p=[i];function l(o,c){return n(),a("div",null,p)}const d=s(t,[["render",l],["__file","发布订阅.html.vue"]]),m=JSON.parse('{"path":"/database/redis/%E5%8F%91%E5%B8%83%E8%AE%A2%E9%98%85.html","title":"发布订阅","lang":"zh-CN","frontmatter":{"title":"发布订阅","tags":["数据库","redis"],"order":"3","description":"redis的发布和订阅 什么是发布和订阅 redis发布订阅（pub/sub）是一种消息通信模式：发布者（pub）发布消息，订阅者（sub）接收消 息。 redis客户端可以订阅任意数量的频道。 redis的发布和订阅 客户端订阅频道图： 当给这个频道发布消息后，消息就会发送给订阅的客户端。 发布和订阅的命令行实现 打开一个客户端订阅channel1，...","head":[["meta",{"property":"og:url","content":"https://gly-dragon.github.io/blog/blog/database/redis/%E5%8F%91%E5%B8%83%E8%AE%A2%E9%98%85.html"}],["meta",{"property":"og:site_name","content":"龙哥不管事"}],["meta",{"property":"og:title","content":"发布订阅"}],["meta",{"property":"og:description","content":"redis的发布和订阅 什么是发布和订阅 redis发布订阅（pub/sub）是一种消息通信模式：发布者（pub）发布消息，订阅者（sub）接收消 息。 redis客户端可以订阅任意数量的频道。 redis的发布和订阅 客户端订阅频道图： 当给这个频道发布消息后，消息就会发送给订阅的客户端。 发布和订阅的命令行实现 打开一个客户端订阅channel1，..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"https://gly-blog-file.oss-cn-shanghai.aliyuncs.com/img/image-20220429151621961.png"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-04-01T02:17:41.000Z"}],["meta",{"property":"article:author","content":"龙哥不管事"}],["meta",{"property":"article:tag","content":"数据库"}],["meta",{"property":"article:tag","content":"redis"}],["meta",{"property":"article:modified_time","content":"2024-04-01T02:17:41.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"发布订阅\\",\\"image\\":[\\"https://gly-blog-file.oss-cn-shanghai.aliyuncs.com/img/image-20220429151621961.png\\",\\"https://gly-blog-file.oss-cn-shanghai.aliyuncs.com/img/image-20220429151800046.png\\",\\"https://gly-blog-file.oss-cn-shanghai.aliyuncs.com/img/image-20220429151918567.png\\"],\\"dateModified\\":\\"2024-04-01T02:17:41.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"龙哥不管事\\",\\"url\\":\\"https://gly-dragon.github.io/blog/\\"}]}"]]},"headers":[{"level":2,"title":"什么是发布和订阅","slug":"什么是发布和订阅","link":"#什么是发布和订阅","children":[]},{"level":2,"title":"redis的发布和订阅","slug":"redis的发布和订阅-1","link":"#redis的发布和订阅-1","children":[]},{"level":2,"title":"发布和订阅的命令行实现","slug":"发布和订阅的命令行实现","link":"#发布和订阅的命令行实现","children":[]},{"level":2,"title":"发布和订阅常用命令","slug":"发布和订阅常用命令","link":"#发布和订阅常用命令","children":[]}],"git":{"createdTime":1711937861000,"updatedTime":1711937861000,"contributors":[{"name":"龙哥不管事","email":"gly3498347531@163.com","commits":1}]},"readingTime":{"minutes":2.17,"words":650},"filePathRelative":"database/redis/发布订阅.md","localizedDate":"2024年4月1日","excerpt":"\\n<h2>什么是发布和订阅</h2>\\n<p>redis发布订阅（pub/sub）是一种消息通信模式：发布者（pub）发布消息，订阅者（sub）接收消 息。 redis客户端可以订阅任意数量的频道。</p>\\n<h2>redis的发布和订阅</h2>\\n<p>客户端订阅频道图：</p>\\n<img src=\\"https://gly-blog-file.oss-cn-shanghai.aliyuncs.com/img/image-20220429150303972.png\\" style=\\"zoom:33%;\\">\\n<p>当给这个频道发布消息后，消息就会发送给订阅的客户端。</p>\\n<img src=\\"https://gly-blog-file.oss-cn-shanghai.aliyuncs.com/img/image-20220429150635009.png\\" style=\\"zoom:33%;\\">","autoDesc":true}');export{d as comp,m as data};
